/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Plugin as _0x289a8e}from'ckeditor5/src/core';import{ButtonView as _0x3dc848,View as _0x56b581,Notification as _0x459874}from'ckeditor5/src/ui';import _0x50d7ea from'./exportpdfcommand';import _0x3db142 from'../theme/icons/exportpdf.svg';import'../theme/exportpdf.css';export default class p extends _0x289a8e{static get['pluginName'](){return'ExportPdf';}static get['requires'](){return['CloudServices',_0x459874];}['init'](){const _0x589549=this['editor'],t=_0x589549['t'],_0x4749e1=_0x589549['config']['get']('exportPdf')||{};_0x589549['commands']['add']('exportPdf',new _0x50d7ea(_0x589549)),_0x589549['ui']['componentFactory']['add']('exportPdf',_0x10b02b=>{const _0x5ef2a0=_0x589549['commands']['get']('exportPdf'),_0x3caa98=new _0x3dc848(_0x10b02b);_0x3caa98['set']({'label':t('Export\x20to\x20PDF'),'icon':_0x3db142,'tooltip':!0x0}),_0x3caa98['bind']('isOn','isEnabled')['to'](_0x5ef2a0,'isBusy','isEnabled'),_0x3caa98['extendTemplate']({'attributes':{'class':[_0x3caa98['bindTemplate']['if']('isOn','ck-exportpdf_status-pending')]}});const _0x5a8c1c=new _0x56b581();return _0x5a8c1c['setTemplate']({'tag':'span','attributes':{'class':['ck','ck-exportpdf__spinner-container']},'children':[{'tag':'span','attributes':{'class':['ck','ck-exportpdf__spinner']}}]}),_0x3caa98['children']['add'](_0x5a8c1c),this['listenTo'](_0x3caa98,'execute',()=>{_0x589549['execute']('exportPdf',_0x4749e1),_0x589549['editing']['view']['focus']();}),_0x3caa98;});const _0x3ed712=_0x589549['plugins']['get']('CloudServices');if(!0x1===_0x4749e1['tokenUrl'])this['_token']=null;else{if(_0x4749e1['tokenUrl'])return _0x3ed712['registerTokenUrl'](_0x4749e1['tokenUrl'])['then'](_0x23fa8b=>{this['_token']=_0x23fa8b;});this['_token']=_0x3ed712['token'];}}}